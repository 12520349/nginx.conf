
#user  nobody;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;


events {
    worker_connections  1024;
}


http {
    include       mime.types;
    default_type  application/octet-stream;

    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    #                  '$status $body_bytes_sent "$http_referer" '
    #                  '"$http_user_agent" "$http_x_forwarded_for"';

    #access_log  logs/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    #gzip  on;
server_names_hash_bucket_size  64;
client_max_body_size 5M;
server {
  listen  80;
     server_name xuanphuc.xyz www.textsms.net;
      rewrite ^(.*) https://textsms.net$1 permanent;
}
server {
   	  listen               443 ssl;
    
    ssl_certificate      ssl/textsms.net/certificate.crt; 
    ssl_certificate_key  ssl/textsms.net/private.key; 
	
	
	
    server_name textsms.net www.textsms.net;

    ssl_session_timeout 5m;
    charset utf-8;

	if ($http_user_agent ~* "morfeus fucking scanner|ZmEu") {
    return 403;
	}
    location  /phpmyadmin {
    satisfy all;
    allow 127.0.0.1;
    deny all;
    }
	
	location ~ ^/(phpmyadmin|dashboard)/ {
    satisfy all;
    allow 127.0.0.1;
    deny all;
    }

    location / {
        proxy_pass http://127.0.0.1:8080;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
     }
	location /beta1/ {
    proxy_pass http://127.0.0.1:9111/;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Host $host;
    proxy_cache_bypass $http_upgrade;
}
 location /socket.io/ {
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_pass "http://localhost:9111/socket.io/";
  }
 location /beta1/socket.io/ {
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_pass "http://localhost:9111/socket.io/";
  }
}
server {
  listen  80;
     server_name new.textsms.net www.new.textsms.net;
      rewrite ^(.*) https://new.textsms.net$1 permanent;
}
server {
   	  listen               443 ssl;
    
    ssl_certificate      ssl/new.textsms.net/certificate.crt; 
    ssl_certificate_key  ssl/new.textsms.net/private.key; 
	
	
	
    server_name new.textsms.net www.new.textsms.net;

    ssl_session_timeout 5m;
    charset utf-8;

  location = / {
    proxy_pass http://127.0.0.1:1880/dashboard;
      proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
  }

  location / {
    proxy_pass http://127.0.0.1:1880;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
  }
    location /socket.io/ {
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_pass "http://localhost:1880/socket.io/";
  }
   
}
server{
  listen 80;
  server_name cpanel.textsms.net;

  location = / {
    proxy_pass http://127.0.0.1:1880/cpanel;
    proxy_set_header Host cpanel.textsms.net;
  }

  location / {
    proxy_pass http://127.0.0.1:1880;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
  }
    location /socket.io/ {
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_pass "http://localhost:1880/socket.io/";
  }
}
server{
  listen 80;
  server_name api.textsms.net;

  location = / {
    proxy_pass http://127.0.0.1:1880/testapi;
    proxy_set_header Host cpanel.textsms.net;
  }

  location / {
    proxy_pass http://127.0.0.1:1880/testapi;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
  }
  
 
}
}
